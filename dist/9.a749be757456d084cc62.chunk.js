webpackJsonp([9],{404:function(t,e,a){a(507);var o=a(96)(a(446),a(540),"data-v-c0fe9662",null);o.options.__file="/Users/ops/Desktop/workspace/admin-bz/src/views/products/listAllocate.vue",o.esModule&&Object.keys(o.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] listAllocate.vue: functional components are not supported with templates, they should use render functions."),t.exports=o.exports},415:function(t,e,a){"use strict";function o(t){return t?t.slice(0,10):""}function r(t){return(t/100).toFixed(2)}function i(t){return t.toFixed(2)}e.b=o,e.a=r,e.c=i},446:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(415),r=a(468);e.default={data:function(){return{queryData:{orderCode:"",carNo:"",mobile:"",pageNo:1,pageSize:20,startDate:"",endDate:"",orderType:"asc"},columns1:[{title:"订单号",align:"center",key:"orderCode"},{title:"车牌号",align:"center",key:"carNo"},{title:"负责人",align:"center",key:"name",render:function(t,e){var a=e.row.name,o=e.row.mobile;return t("span",a?o+"\n（"+a+"）":o)}},{title:"分配时间",align:"center",key:"fromCdt"},{title:"支付状态",align:"center",key:"paystatus",render:function(t,e){var a=e.row.paystatus;return 0==a?t("span","未支付"):1==a?t("span","已支付"):void 0}}],historyData:[],columns:[],userList:[],applyUserList:[],totalCount:"",allocateConfig:{orderCodes:[],applyUid:""},modelStatus:!1,modelStatus2:!1}},mounted:function(){this.getColumns(),this.queryList(),this.getApplyUserList()},methods:{sortable:function(t){"forceValidDate"==t.key&&(this.queryData.orderType=t.order,this.queryList(1))},insurDatePick:function(t){t[0]&&t[1]?(this.queryData.startDate=t[0],this.queryData.endDate=t[1]):(this.queryData.startDate="",this.queryData.endDate="")},getColumns:function(){var t=this,e=[{type:"selection",width:60,align:"center"},{title:"订单号",key:"orderCode",align:"center"},{title:"车牌号",key:"carNo",align:"center"},{title:"最近保险起保日",key:"forceValidDate",align:"center",sortable:"custom",render:function(t,e){return t("span",a.i(o.b)(e.row.forceValidDate))}},{title:"上次负责人",align:"center",render:function(t,e){var a=e.row.disName,o=e.row.disMobile;return t("span",a?o+"\n（"+a+"）":o)}},{title:"上次支付状态",align:"center",render:function(t,e){return t("span",0==e.row.paystatus?"未支付":"已支付")}},{title:"负责人",align:"center",render:function(t,e){var a=e.row.name,o=e.row.mobile;return t("span",a?o+"\n（"+a+"）":o)}},{title:"分配时间",align:"center",render:function(t,e){return t("span",a.i(o.b)(e.row.disTime))}},{title:"操作",align:"center",render:function(e,o){var i=o.row.carNo;return e("a",{on:{click:function(){a.i(r.a)(i).then(function(e){1e4===e.errCode?(t.historyData=e.data,t.openModel2()):t.$Message.error(e.data)}).catch(function(e){t.$Message.error("获取分配历史列表失败"),console.log(e)})}}},"分配历史")}}];this.columns=e},queryList:function(t){var e=this;t&&(this.queryData.pageNo=1),a.i(r.b)(this.queryData).then(function(t){1e4===t.errCode?(e.totalCount=t.data.totalCount,e.userList=t.data.results):e.$Message.error(t.data)}).catch(function(t){e.$Message.error("待分配订单列表获取失败"),console.log(t)})},getApplyUserList:function(){var t=this;a.i(r.c)(this.queryData).then(function(e){1e4===e.errCode?t.applyUserList=e.data:t.$Message.error(e.data)}).catch(function(e){t.$Message.error("电销员列表获取失败"),console.log(e)})},openModel:function(){this.modelStatus=!0},openModel2:function(){this.modelStatus2=!0},selecteRow:function(t){var e=this;this.allocateConfig.orderCodes=[],t.map(function(t){e.allocateConfig.orderCodes.push(t.orderCode)})},okStatus:function(){var t=this;a.i(r.d)(this.allocateConfig).then(function(e){1e4===e.errCode?(t.$Message.success("分配成功"),t.modelStatus=!1,t.queryList()):t.$Message.error(e.data)}).catch(function(e){t.$Message.error("分配失败"),console.log(e)})},changePage:function(t){this.queryData.pageNo=t,this.queryList()}}}},468:function(t,e,a){"use strict";function o(t){var e={orderCode:t.orderCode,carNo:t.carNo,mobile:t.mobile,pageNo:t.pageNo,pageSize:t.pageSize};return a.i(s.a)({baseURL:c,url:"/esale/queryOrderDistribute",data:e})}function r(){var t={};return a.i(s.a)({baseURL:c,url:"/esale/userList",data:t})}function i(t){var e={orderCodes:t.orderCodes,applyUid:t.applyUid};return a.i(s.a)({baseURL:c,url:"/esale/distribute",data:e})}function n(t){var e={carNo:t};return a.i(s.a)({baseURL:c,url:"/esale/disLog",data:e})}e.b=o,e.c=r,e.d=i,e.a=n;var s=a(139),l=a(140),c=l.a.javacore},507:function(t,e){},540:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"identiyaudit-page"},[a("Row",{attrs:{type:"flex",align:"middle"}},[a("Col",{attrs:{span:20}},[a("Card",{staticStyle:{"margin-bottom":"15px"}},[a("Form",{ref:"formInline",staticClass:"identiyaudit-form",attrs:{inline:"","label-width":70}},[a("Form-item",{staticClass:"identiyaudit-form-item",attrs:{label:"订单号"}},[a("Input",{staticClass:"identiyaudit-form-input",attrs:{type:"text",placeholder:"订单号"},model:{value:t.queryData.orderCode,callback:function(e){t.queryData.orderCode=e},expression:"queryData.orderCode"}})],1),t._v(" "),a("Form-item",{staticClass:"identiyaudit-form-item",attrs:{label:"车牌号"}},[a("Input",{staticClass:"identiyaudit-form-input",attrs:{type:"text",placeholder:"车牌号"},model:{value:t.queryData.carNo,callback:function(e){t.queryData.carNo=e},expression:"queryData.carNo"}})],1),t._v(" "),a("Form-item",{staticClass:"identiyaudit-form-item",attrs:{label:"负责人"}},[a("Input",{staticClass:"identiyaudit-form-input",attrs:{type:"text",placeholder:"负责人"},model:{value:t.queryData.mobile,callback:function(e){t.queryData.mobile=e},expression:"queryData.mobile"}})],1),t._v(" "),a("Form-item",{staticClass:"identiyaudit-form-item",attrs:{label:"商业险起保日","label-width":90}},[a("Date-picker",{attrs:{type:"daterange",placement:"bottom",placeholder:"选择日期"},on:{"on-change":t.insurDatePick}})],1),t._v(" "),a("Form-item",{staticClass:"identiyaudit-form-item"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.queryList(1)}}},[t._v("搜索")])],1)],1)],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[a("Button",{attrs:{type:"primary"},on:{click:t.openModel}},[t._v("分配任务")])],1)],1),t._v(" "),a("Table",{attrs:{stripe:"",columns:t.columns,data:t.userList},on:{"on-sort-change":t.sortable,"on-selection-change":t.selecteRow}}),t._v(" "),t.userList.length>0?a("div",{staticClass:"identiyaudit-pagebar"},[a("Page",{staticClass:"identiyaudit-page-components",attrs:{total:t.totalCount,current:t.queryData.pageNo,"page-size":20,size:"small","show-total":""},on:{"on-change":t.changePage}})],1):t._e(),t._v(" "),a("Modal",{staticClass:"identiyaudit-model",attrs:{title:"名单分配"},model:{value:t.modelStatus,callback:function(e){t.modelStatus=e},expression:"modelStatus"}},[a("Form",{ref:"formInline",attrs:{inline:"","label-width":120}},[a("Form-item",{staticClass:"commissionconfig-form-item",attrs:{label:"任务分配给"}},[a("Select",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:t.allocateConfig.applyUid,callback:function(e){t.allocateConfig.applyUid=e},expression:"allocateConfig.applyUid"}},t._l(t.applyUserList,function(e,o){return a("Option",{key:o,attrs:{value:e.id,label:e.mobile}},[a("span",{domProps:{textContent:t._s(e.mobile)}}),t._v(" "),a("span",{staticStyle:{float:"right",color:"#ccc"},domProps:{textContent:t._s(e.name)}})])}))],1)],1),t._v(" "),a("div",{slot:"footer"},[a("Button",{attrs:{type:"info",size:"large"},on:{click:t.okStatus}},[t._v("保存")]),t._v(" "),a("Button",{attrs:{size:"large"},on:{click:function(e){t.modelStatus=!1}}},[t._v("取消")])],1)],1),t._v(" "),a("Modal",{staticClass:"identiyaudit-model",attrs:{title:"分配历史",width:"800"},model:{value:t.modelStatus2,callback:function(e){t.modelStatus2=e},expression:"modelStatus2"}},[a("Form",{ref:"formInline",attrs:{inline:"","label-width":120}},[a("Table",{attrs:{stripe:"",columns:t.columns1,data:t.historyData}})],1),t._v(" "),a("div",{slot:"footer"},[a("Button",{attrs:{type:"info",size:"large"},on:{click:function(e){t.modelStatus2=!1}}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0}});